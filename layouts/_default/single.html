{{/*  Template for single pages. Used by article pages for example.  */}}
{{ define "main" }}
    <main id="main">
        <div class="main-inner-wrapper max-width-wrapper single">
            <article class="post-single">
                <div class="article-header">
                    {{ if .Site.Params.article.readingTime }}
                        {{ partial "components/breadcrumbs.html" . }}
                    {{ end }}    
                    <div class="title">
                        {{ .Title }}
                    </div>
                    {{ if .Params.tags }}
                        <div class="article-tags">
                            {{ range (.GetTerms "tags") }}
                                <a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
                            {{ end }}
                        </div>
                    {{ end }}
                    <div class="decription">
                        {{ .Description }}
                    </div>
                    {{ partial "helper/articleDateInfo.html" . }}
                    {{ if .IsTranslated }}
                        <div class="article-translations">
                            {{ partial "helper/icon" "languages" }}
                            <div>
                                {{ range .Translations }}
                                    Translations: <a href="{{ .Permalink }}" class="link">{{ .Language.LanguageName }}</a>
                                {{ end }}
                            </div>
                        </div>
                    {{ end }}
                    {{ if .Site.Params.article.readingTime }}
                        <div class="reading-time">
                            {{ partial "helper/icon" "clock" }}
                            <time>
                                {{ .ReadingTime }} minute read
                            </time>
                        </div>
                    {{ end }}
                </div>
                <section class="article-content">
                    <!-- Refer to https://discourse.gohugo.io/t/responsive-tables-in-markdown/10639/5 -->
                    {{ $wrappedTable := printf "<div class=\"table-wrapper\">${1}</div>" }}
                    {{ if .Content }}
                        <div class="post-content toc-content-selector">
                            {{ partial "helper/anchoredHeading.html" .Content | replaceRE "(<table>(?:.|\n)+?</table>)" $wrappedTable | safeHTML }}
                        </div>
                    {{ end }}
                </section>
                <div class="article-footer">
                    {{ if .Params.Categories }}
                        <div class="article-categories">
                            {{ range (.GetTerms "categories") }}
                                <a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
                            {{ end }}
                        </div>
                        {{ partial "components/share.html" . }}
                    {{ end }}
                </div>
            </article>
            <div>
                <aside>
                    <div class="toc">
                        <div class="widget-icon">
                            {{ partial "helper/icon" "align-start-vertical" }}
                        </div>
                        <div class="title">
                            Table Of Content
                        </div>
                        <div class="table-of-contet">
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </main>
{{ end }}